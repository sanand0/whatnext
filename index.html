<!DOCTYPE html><html lang="en">
<head>
  <meta charset="utf8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Priority Matrix</title>
  <style>
  /* Based on normalize.css */
  html {
    font-family: Helvetica, Arial, sans-serif;
    -webkit-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
  }
  body {
    margin: 0 auto;
    padding: 20px 0;
    width: 920px;
  }
  *, *:before, *:after {
    -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
            box-sizing: border-box;
  }

  /* We just have one large heading. */
  h1 {
    margin: .67em 0;
    font-size: 2em;
  }

  /* This is the DOM structure we're using:
        #container        Overall container
          - svg#grid      Background grid
          - div#items     Container for items
              - div.item  Individual iteemes
   */
  #container { position: relative; }
  #items { overflow: hidden; }

  .item {
    position: absolute;
    max-width: 15em;
    min-width: 5em;
    padding: 0.15em 0.25em;
    background-color: #fff;
    border: 1px solid #5b9bd5;
    opacity: 0.95;
    border-radius: 5px;
  }
  /* http://stackoverflow.com/a/12968143/100904 */
  .item:before {
    width: 50%;
    position: absolute;
    top: -15px;
    left: -1px;
    content: '';
    border-top: 15px solid #5b9bd5;
    cursor: move;
  }
  .item:focus, .item:hover {
    z-index: 1;
    opacity: 1;
  }


  /* Button styling */
  .button {
    display: inline-block;
    vertical-align: middle;
    font-size: 14px;
    line-height: 20px;
    height: 34px;
    font-weight: normal;
    border: 1px solid #ccc;
    background-color: #fff;
    color: #333;
    border-radius: 4px;
    padding: 6px 12px;
    cursor: pointer;
    white-space: nowrap;
  }
  .button:hover, .button:focus, .button:active {
    background-color: #ebebeb;
    border-color: #adadad;
  }

  /* Body text (help, mainly) uses this style. Typography inspired by atlas.oreilly.com */
  .copy {
    max-width: 690px;
    color: #333;
    font-size: 18px;
    line-height: 1.3em;
    font-family: "Book Antiqua", Palatino, "Palatino Linotype", "Palatino LT STD", Georgia, serif;
    -webkit-font-smoothing: subpixel-antialiased;
    letter-spacing: .01em;
  }
  </style>
</head><body>

<h1>
  Priority Matrix
  <button id="add-item" class='button'>New item</button>
</h1>

<div id="container">
  <svg id="grid" width="920" height="559" ondragover="return false"><!-- 920 / 559 ~ Golden ratio -->
    <rect id="background" width="100%" height="100%" fill="#eef"/>
  </svg>
  <div id="items">
    <div draggable="true" class="item" style="left:270px;top:110px" contentEditable>Drag my handle: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
    <div draggable="true" class="item" style="left:360px;top:170px" contentEditable>Drag my handle: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
    <div draggable="true" class="item" style="left:100px;top:390px" contentEditable>Drag my handle: Lorem ipsum dolor sit amet</div>
    <div draggable="true" class="item" style="left:720px;top:390px" contentEditable>Drag my handle</div>
  </div>
</div>

<div id="help" class="copy">
  <p>Sometimes, it’s hard to figure out what to do next.</p>
  <p>One classic approach is to list all your items, rate them on an urgency and importance scale, and pick those on the top right quadrant.
     Stephen Covey explains this in his book <a href="http://en.wikipedia.org/wiki/First_Things_First_(book)" target="_blank">First Things First</a>.</p>
  <p>This can be generalised. Almost anything can be prioritised on a grid.</p>
  <p>This page is an <strong>offline single-page app</strong> that lets you add things and move them around. You can pick your axis scales.
     Everything’s saved in your browser and available the next time you visit. (But it won’t be available in other browsers or for other people.)</p>
</div>

<script>
// A crude version of event delegation
// All live events are bound to the container.
// on('click', 'item', handler) runs handler if a ".item" is clicked.
var container = document.getElementById('container')
function on(event, className, handler) {
  container.addEventListener(event, function(e) {
    if (typeof e.target.className == 'string'     // SVG elements return an object for .className.
        && e.target.className.match(className))   // Though 'item' also matches 'items', we can afford to ignore that.
      return handler(e)
  }, false)
}


// Make items draggable
var startX, startY
on('dragstart', 'item', function(e) {
  startX = e.screenX
  startY = e.screenY
  // Firefox won't trigger dragend without dataTransfer.setData().
  // IE does not like 'text/plain' -- only 'text'. http://stackoverflow.com/a/26660055/100904
  e.dataTransfer.setData('text', '')
})
on('dragend', 'item', function(e) {
  // Firefox dragend sets clientX to 0. Using screenX instead
  e.target.style.left = parseInt(e.target.style.left) + e.screenX - startX + 'px'
  e.target.style.top = parseInt(e.target.style.top) + e.screenY - startY + 'px'
})


// #add-item button adds a random item on the page
var items = document.getElementById('items')
document.getElementById('add-item').addEventListener('click', function(e) {
  var item = document.createElement('div')
  item.appendChild(document.createTextNode('New item'))
  item.setAttribute('draggable', 'true')
  item.setAttribute('class', 'item')
  item.setAttribute('contentEditable', 'true')
  // Add the item just below the new item button, making it easier to drag it
  item.style.left = (this.getBoundingClientRect().left - document.body.getBoundingClientRect().left) + 'px'
  item.style.top = '-10px'    // 10px above the #items container
  items.appendChild(item)
})
</script>
</body></html>
